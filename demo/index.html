<!--
@license
Copyright (c) 2018 Advanced Community Information Systems (ACIS) Group, Chair of Computer Science 5 (Databases &
Information Systems), RWTH Aachen University, Germany. All rights reserved.
-->

<!doctype html>
<html>
<head>
  <title>openidconnect-signin demo</title>

  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <script src="https://unpkg.com/@webcomponents/webcomponentsjs@^2.0.0/webcomponents-loader.js"></script>
  <script type="module">
    import '../openidconnect-signin.js';
  </script>
</head>
<body unresolved>
  <openidconnect-signin id="signin"
                        scope="openid profile"
                        clientid="a4b3f15a-eaec-489a-af08-1dc9cf57347e"
                        authority="https://api.learning-layers.eu/o/oauth2"
                        providername="Layers"
                        popupredirecturi="popup-signin-callback.html"
                        popuppostlogoutredirecturi="popup-signout-callback.html"
                        silentredirecturi="silent-callback.html"></openidconnect-signin>

  <script>
    /* NOTE: THIS IS ONLY NEEDED BECAUSE OF OUR WEIRD DEMO SERVER! */
    document.getElementById('signin').addEventListener('signed-out', e => {
      //new Image().src = 'https://api.learning-layers.eu/o/oauth2/logout';
      let i = document.createElement('iframe');
      i.style.display = 'none';
      i.onload = function() { i.parentNode.removeChild(i); };
      i.src = 'https://api.learning-layers.eu/o/oauth2/logout';
      document.body.appendChild(i);
    });
  </script>
</body>
</html>
